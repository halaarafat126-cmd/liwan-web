<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>المتجر | ليوان</title>
<link href="https://fonts.googleapis.com/css?family=Tajawal:400,700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"/>
<style>
body{
  margin:0;
  font-family:'Tajawal',sans-serif;
  background:#f6f3ef;
  color:#355774;
}

/* ===== HEADER ===== */
header{
  position:fixed;
  top:0;
  left:0;
  right:0;
  z-index:1000;
}
.page-header{
  background:#4c6b82;
  color:#f8ebd7;
  text-align:center;
  padding:15px 20px;
  font-size:1.5rem;
  font-weight:700;
  position:relative;
}
.cart-icon{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  right:20px;
  cursor:pointer;
}
.cart-icon i{
  font-size:1.5rem;
}
.cart-count{
  position:absolute;
  top:-8px;
  left:-8px;
  background:#f6bd60;
  color:#000;
  width:20px;
  height:20px;
  border-radius:50%;
  font-size:0.8rem;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* ===== Sidebar ===== */
.liwan-sidenav {
     position: fixed;
     left: 0;
     top: 0;
     width: 80px;
     height: 100vh;
     background: #4c6b82;
     display: flex;
     flex-direction: column;
     align-items: center;
     justify-content: center;
     z-index: 1000;
     box-shadow: 2px 0 18px rgba(40,54,90,0.07);
   }
   .liwan-sidenav ul {
     list-style: none;
     margin: 0;
     padding: 0;
     display: flex;
     flex-direction: column;
     align-items: center;
   }
   .liwan-sidenav li {
     margin-bottom: 24px;
     width: 100%;
     display: flex;
     justify-content: center;
     position: relative;
   }
   .liwan-side-link {
     position: relative;
     display: flex;
     align-items: center;
     justify-content: center;
     width: 60px;
     height: 60px;
     border-radius: 12px;
     color: #f8ebd7;
     font-size: 24px;
     text-decoration: none;
     cursor: pointer;
     transition: background 0.15s, box-shadow 0.18s;
   }
   .liwan-side-link:hover {
     background: #365069;
     box-shadow: 0 3px 18px rgba(31,59,77,0.13);
   }
   .liwan-side-link .liwan-icon-label {
     position: absolute;
     top: 50%;
     left: 100%;
     transform: translateY(-50%);
     opacity: 0;
     pointer-events: none;
     background: #1f3b4d;
     color: #f8ebd7;
     padding: 8px 18px;
     border-radius: 0 10px 10px 0;
     white-space: nowrap;
     font-size: 1em;
     font-weight: 600;
     transition: opacity 0.25s, left 0.2s;
     box-shadow: 2px 2px 14px rgba(31,59,77,0.15);
     z-index: 2;
   }
   .liwan-side-link:hover .liwan-icon-label {
     opacity: 1;
     pointer-events: auto;
     left: 65px;
   }
   .liwan-side-link i {
     margin: 0 auto;
     transition: color 0.17s;
   }
   @media (max-width: 600px) {
  .liwan-sidenav { 
    width: 72px; 
  }

  .liwan-side-link { 
    width: 56px; 
    height: 56px; 
  }

  .liwan-side-link i {
    font-size: 28px; /* ← هاي الأهم */
  }

  .liwan-side-link .liwan-icon-label { 
    display: none; /* عالتلفون ما بدنا نص */
  }
}
/* ===== GRID ===== */
.main-content{
  margin-top:70px;
  padding:20px;
}
.product-grid{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:20px;
}
.product-card{
  background:#fff;
  border-radius:16px;
  box-shadow:0 4px 20px rgba(0,0,0,.08);
  padding:10px;
  display:flex;
  flex-direction:column;
  align-items:center;
}
.product-card img{
  width:100%;
  height:120px;
  object-fit:cover;
  border-radius:12px;
}
.product-title{
  font-weight:700;
  margin:8px 0;
  text-align:center;
}
.product-price{
  font-weight:600;
  color:#f6bd60;
  margin-bottom:8px;
}
.add-btn{
  padding:8px 12px;
  border:none;
  border-radius:12px;
  background:#f6bd60;
  font-weight:700;
  cursor:pointer;
}

/* ===== CART ===== */
.cart-popup{
  position:fixed;
  top:70px;
  right:20px;
  width:250px;
  max-height:450px;
  background:#fff;
  border-radius:12px;
  box-shadow:0 4px 20px rgba(0,0,0,.2);
  padding:10px;
  display:none;
  flex-direction:column;
  overflow-y:auto;
  z-index:1001;
}
.cart-popup h3{
  margin:0 0 10px 0;
  text-align:center;
}
.cart-item{
  display:flex;
  justify-content:space-between;
  margin-bottom:8px;
}
.remove-btn{
  background:#e74c3c;
  color:#fff;
  border:none;
  border-radius:8px;
  padding:2px 6px;
  cursor:pointer;
}
.checkout-btn{
  margin-top:10px;
  padding:8px;
  border:none;
  border-radius:12px;
  background:#355774;
  color:#f8ebd7;
  font-weight:700;
  cursor:pointer;
  width:100%;
}

/* ===== MOBILE ===== */
@media(max-width:768px){
  .product-grid{grid-template-columns:1fr 1fr}
}
@media(max-width:480px){
  .product-grid{grid-template-columns:1fr}
}
</style>
</head>
<body>

    <nav class="liwan-sidenav" aria-label="شريط التنقل الجانبي الثابت">
        <ul>
          <li>
            <a href="home.html" class="liwan-side-link">
              <i class="fas fa-home"></i>
              <span class="liwan-icon-label">الرئيسية</span>
            </a>
          </li>
          <li>
            <a href="profile.html" class="liwan-side-link">
              <i class="fas fa-user-circle"></i>
              <span class="liwan-icon-label">الملف الشخصي</span>
            </a>
          </li>
          <li>
           <a href="chat.html" class="liwan-side-link chat-link">
             <i class="fas fa-comments"></i>
             <span class="chat-dot"></span>
             <span class="liwan-icon-label">الدردشة</span>
           </a>      
          </li>
          <li>
            <a href="activities.html" class="liwan-side-link">
              <i class="fas fa-calendar-alt"></i>
              <span class="liwan-icon-label">الأنشطة</span>
            </a>
          </li>
          <li>
            <a href="store.html" class="liwan-side-link">
              <i class="fas fa-store"></i>
              <span class="liwan-icon-label">المتجر</span>
            </a>
          </li>
          <li>
            <a href="transport.html" class="liwan-side-link">
              <i class="fas fa-bus"></i>
              <span class="liwan-icon-label">التنقلات</span>
            </a>
          </li>
          <li>
            <a href="it-support.html" class="liwan-side-link">
              <i class="fas fa-headset"></i>
              <span class="liwan-icon-label">الدعم التقني</span>
            </a>
          </li>
          <li>
            <a href="about.html" class="liwan-side-link">
              <i class="fas fa-circle-info"></i>
              <span class="liwan-icon-label">عن ليوان</span>
            </a>
          </li>
        </ul>
      </nav>
    
     <script>
// false = مسجل، true = زائر
const isVisitor = false;
</script>

<header>
  <div class="page-header">
    المتجر
    <div class="cart-icon">
      <i class="fas fa-shopping-cart"></i>
      <div class="cart-count">0</div>
    </div>
  </div>
</header>

<div class="cart-popup" id="cartPopup">
  <h3>سلة المشتريات</h3>
  <div id="cartItems"></div>
  <hr>
  <div style="text-align:center;font-weight:700;">
    الإجمالي: <span id="totalPrice">0</span> $
  </div>
  <button class="checkout-btn" id="checkoutBtn">طلب الآن</button>
</div>

<div class="main-content">
  <div class="product-grid" id="productGrid"></div>
</div>

<script>
    // ===== التمييز بين الزائر والمستخدم =====
// إذا localStorage فيه "userEmail" → مستخدم مسجل
// لما المستخدم يسجل ايميله
localStorage.setItem("userEmail", "hala@example.com");

// اختبار: عرض حالة المستخدم
if(isVisitor){
  console.log("أنت زائر");
} else {
  console.log("أنت مستخدم مسجّل: " + localStorage.getItem("userEmail"));
}
// ===== المنتجات =====
const products = [
  {id:1,title:"فخار",price:10,image:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQT79ie7eSNE2pu0uK9YyWFR_y5sVyFxDSH6A&s"},
  {id:2,title:"وشاح",price:20,image:"https://img.kwcdn.com/product/fancy/a26b8827-7f05-4082-b4e1-08891c41e870.jpg?imageMogr2/auto-orient%7CimageView2/2/w/800/q/70/format/webp"},
  {id:3,title:"اكواب",price:15,image:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQlEycxtaJjoejrkdGKwZV4MMtQGBmJ59bGcg&s"},
  {id:4,title:"اوريغامي",price:12,image:"https://i.ytimg.com/vi/evTozvPV6I0/maxresdefault.jpg"},
  {id:5,title:"كتب",price:18,image:"https://egyptinnovate.com/sites/default/files/books.png"}
];

// ===== السلة =====
let cart = [];

// ===== RENDER المنتجات =====
const grid = document.getElementById("productGrid");
const cartCount = document.querySelector(".cart-count");
const cartPopup = document.getElementById("cartPopup");
const cartItems = document.getElementById("cartItems");
const totalPriceEl = document.getElementById("totalPrice");
const checkoutBtn = document.getElementById("checkoutBtn");

function renderProducts(){
  grid.innerHTML="";
  products.forEach(p=>{
    grid.innerHTML+=`
      <div class="product-card">
        <img src="${p.image}">
        <div class="product-title">${p.title}</div>
        <div class="product-price">${p.price} \$</div>
        ${!isVisitor ? `<button class="add-btn" data-id="${p.id}">أضف للسلة</button>` : ''}
      </div>
    `;
  });
}
renderProducts();

// ===== أحداث المنتجات =====
grid.addEventListener("click", e=>{
  const btn = e.target.closest(".add-btn");
  if(!btn) return;

  const prodId = parseInt(btn.dataset.id);
  const product = products.find(p=>p.id===prodId);
  cart.push(product);
  renderCart();
});

// ===== RENDER السلة =====
function renderCart(){
  cartItems.innerHTML="";
  let total=0;
  cart.forEach((item,index)=>{
    total += item.price;
    cartItems.innerHTML+=`
      <div class="cart-item">
        <span>${item.title} - ${item.price} \$</span>
        <button class="remove-btn" data-index="${index}">حذف</button>
      </div>
    `;
  });
  cartCount.textContent = cart.length;
  totalPriceEl.textContent = total;
}

// حذف منتج من السلة
cartItems.addEventListener("click", e=>{
  const btn = e.target.closest(".remove-btn");
  if(!btn) return;
  const idx = parseInt(btn.dataset.index);
  cart.splice(idx,1);
  renderCart();
});

// عرض وإخفاء السلة
document.querySelector(".cart-icon").addEventListener("click",()=>{
  if(isVisitor) return;
  cartPopup.style.display = cartPopup.style.display==="flex"?"none":"flex";
});

// طلب الآن
checkoutBtn.addEventListener("click",()=>{
  if(cart.length===0){
    alert("السلة فارغة!");
    return;
  }
  alert("تم إرسال الطلب بنجاح!");
  cart = [];
  renderCart();
  cartPopup.style.display="none";
});
</script>

</body>
</html>